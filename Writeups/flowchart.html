<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Stimulus Flowchart</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="flowchart_files/libs/clipboard/clipboard.min.js"></script>
<script src="flowchart_files/libs/quarto-html/quarto.js"></script>
<script src="flowchart_files/libs/quarto-html/popper.min.js"></script>
<script src="flowchart_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="flowchart_files/libs/quarto-html/anchor.min.js"></script>
<link href="flowchart_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="flowchart_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="flowchart_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="flowchart_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="flowchart_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="flowchart_files/libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="flowchart_files/libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="flowchart_files/libs/vis-9.1.0/vis-network.min.js"></script>
<script src="flowchart_files/libs/visNetwork-binding-2.1.0/visNetwork.js"></script>
<script src="flowchart_files/libs/quarto-diagram/mermaid.min.js"></script>
<script src="flowchart_files/libs/quarto-diagram/mermaid-init.js"></script>
<link href="flowchart_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-full">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#recording-and-setup" id="toc-recording-and-setup" class="nav-link active" data-scroll-target="#recording-and-setup">Recording and Setup</a>
  <ul class="collapse">
  <li><a href="#force-aligned-textgrids-and-pitchtiers" id="toc-force-aligned-textgrids-and-pitchtiers" class="nav-link" data-scroll-target="#force-aligned-textgrids-and-pitchtiers">Force-aligned TextGrids and PitchTiers</a></li>
  </ul></li>
  <li><a href="#selecting-recordings" id="toc-selecting-recordings" class="nav-link" data-scroll-target="#selecting-recordings">Selecting recordings</a>
  <ul class="collapse">
  <li><a href="#averaging-process" id="toc-averaging-process" class="nav-link" data-scroll-target="#averaging-process">Averaging process</a></li>
  </ul></li>
  <li><a href="#duration-manipulations" id="toc-duration-manipulations" class="nav-link" data-scroll-target="#duration-manipulations">Duration manipulations</a></li>
  <li><a href="#resynthesis" id="toc-resynthesis" class="nav-link" data-scroll-target="#resynthesis">Resynthesis</a>
  <ul class="collapse">
  <li><a href="#experiment-1" id="toc-experiment-1" class="nav-link" data-scroll-target="#experiment-1">Experiment 1</a></li>
  <li><a href="#experiment-2" id="toc-experiment-2" class="nav-link" data-scroll-target="#experiment-2">Experiment 2</a></li>
  <li><a href="#experiment-3" id="toc-experiment-3" class="nav-link" data-scroll-target="#experiment-3">Experiment 3</a></li>
  </ul></li>
  <li><a href="#final-normalization-procedures" id="toc-final-normalization-procedures" class="nav-link" data-scroll-target="#final-normalization-procedures">Final Normalization Procedures</a></li>
  <li><a href="#automation" id="toc-automation" class="nav-link" data-scroll-target="#automation">Automation</a></li>
  </ul>
</nav>
</div>
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Stimulus Flowchart</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rPraat)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sosprosody)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(targets)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="recording-and-setup" class="level2">
<h2 class="anchored" data-anchor-id="recording-and-setup">Recording and Setup</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<p>
</p><pre class="mermaid" data-tooltip-selector="#mermaid-tooltip-1">flowchart TD
classDef praat fill:#E46E85,stroke:#85144b,color:#ffffff;
classDef python fill:#366994,stroke:#FFC331,color:#FFC331;
classDef rstats fill:#6FA1D0,stroke:#245AAB,color:#ffffff;
classDef shell fill:#111111,stroke:#2ECC40,color:#ffffff;
%% Files to make
TriggerScript[[trigger2tg.praat]]
ExtractTakes[[extract_takes.praat]]
MFA[[force_align.sh]]
PitchTierScript[[gen_manips_pitchtier.praat]]

class TriggerScript praat
class ExtractTakes praat
class MFA shell
class PitchTierScript praat

%% Define Directories
RawRec["ðŸ“‚00: Recordings"]
MonoRec["ðŸ“‚01: Mono Recordings"]
PossibleRecs["ðŸ“‚02: Possible Recordings"]
Textgrids["ðŸ“‚02a: Textgrids for Recordings"]
PitchTiers["ðŸ“‚02b: PitchTiers for Recordings"]



RawRec -- Extract mono channel --&gt; TriggerScript --&gt; MonoRec
    MonoRec -- Annotate textgrid to denote OK takes --&gt; ExtractTakes
    ExtractTakes --&gt; PossibleRecs
    PossibleRecs --&gt; MFA -- Standardized textgrid annotations --&gt; Textgrids
    PossibleRecs --&gt; PitchTierScript --&gt; PitchTiers
    
</pre>
<div id="mermaid-tooltip-1" class="mermaidTooltip">

</div>
<p></p>
</div>
</div>
</div>
<p>This portion of the process has most of the manual labor. After the recordings are done, I use the <code>trigger2tg.praat</code> script to segment the individual target utterances, which contain <strong><em>many takes</em></strong> of the same sentence. Then, I listen to all the takes and denote which ones are OK enough to possibly use later, which are marked on a TextGrid with the following format:<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tg.read</span>(<span class="st">"01_Mono/exp1_raw_3syl_01_HLL.TextGrid"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>exp1_raw_3syl_01_HLL.TextGrid
[              utterance: 8/9 labeled intervals from 0 to 655.24               ]
[              take: 29/59 labeled intervals from 0 to 655.24                  ]
[              filename: 8/9 labeled intervals from 0 to 655.24                ] </code></pre>
</div>
</div>
<p>The <code>extract_takes.praat</code> script automatically extracts all of the takes annotated on the second tier above, saving separate <code>.wav</code> files and TextGrids. These textgrids have a single tier/interval containing the utterance, which is fed into the force alignment step.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tg.read</span>(<span class="st">"02_PossibleRecordings/grandmother_01_LHH_001.TextGrid"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>grandmother_01_LHH_001.TextGrid
[               utterance: 1/1 labeled intervals from 0 to 1.68                ] </code></pre>
</div>
</div>
<section id="force-aligned-textgrids-and-pitchtiers" class="level3">
<h3 class="anchored" data-anchor-id="force-aligned-textgrids-and-pitchtiers">Force-aligned TextGrids and PitchTiers</h3>
<p>The force alignment step uses the Montreal Force Aligner with the dictionary and acoustic model as specified in the commands below. Log files are saved for the validation and align procedures. Note that thereâ€™s some new out of vocabular words that were added to the dictionary, see the <code>README</code> for details.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_lines</span>(<span class="fu">tar_read</span>(force_align_script))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "source C:/Users/tsost/Anaconda3/etc/profile.d/conda.sh"                                                                                                 
[2] "conda init bash"                                                                                                                                        
[3] "conda activate aligner"                                                                                                                                 
[4] "mfa validate 02_PossibleRecordings Scripts/english_us_mfa.dict Scripts/english_mfa.zip &gt; Scripts/mfa_validation.log"                                    
[5] "mfa align --clean 02_PossibleRecordings Scripts/english_us_mfa.dict Scripts/english_mfa.zip 02_PossibleRecordings/MFA_textgrids &gt; Scripts/mfa_align.log"</code></pre>
</div>
</div>
<p>The resulting text grids have the following standardized format:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tg.read</span>(<span class="st">"02_PossibleRecordings/MFA_textgrids/grandmother_01_LHH_001.TextGrid"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>grandmother_01_LHH_001.TextGrid
[                words: 4/6 labeled intervals from 0 to 1.68                   ]
[                phones: 15/17 labeled intervals from 0 to 1.68                ] </code></pre>
</div>
</div>
<p>To make corresponding PitchTier files, the <code>gen_manips_pitchtier.praat</code> script is used. The pitchtiers look like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pt.read</span>(<span class="st">"02_PossibleRecordings/PitchTiers/grandmother_01_LHH_001.PitchTier"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>grandmother_01_LHH_001.PitchTier: 114 total pitch pulses.
186|                                                                           |
   |                                                          OOO              |
   |                                                       OOO                 |
   |                                                    OOO                    |
   |                                                  OO                       |
   |                                               OOO                         |
   |                 OOOOOOOO                  OOOO                            |
   |        OOOOOOOOO        OOO       OOOOOOOO                                |
   |                            OOOOOOO                                        |
 41|      OO                                                                   |
   0                                                                        1.68 </code></pre>
</div>
</div>
</section>
</section>
<section id="selecting-recordings" class="level2">
<h2 class="anchored" data-anchor-id="selecting-recordings">Selecting recordings</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<p>
</p><pre class="mermaid" data-tooltip-selector="#mermaid-tooltip-2">flowchart TD
classDef praat fill:#E46E85,stroke:#85144b,color:#ffffff;
classDef python fill:#366994,stroke:#FFC331,color:#FFC331;
classDef rstats fill:#6FA1D0,stroke:#245AAB,color:#ffffff;
classDef shell fill:#111111,stroke:#2ECC40,color:#ffffff;
classDef excel fill:#17874E,stroke:#134130,color:#ffffff;

RawEDA[[raw_recordings_eda.qmd]]
SylHelper[[syllable_helpers.R]]
SylSpecs[[syllabification.csv]]

class RawEDA rstats
class PromoScript python
class GetDurTiers rstats
class DurationScript praat
class DurationScript2 praat
class SylHelper rstats
class TierHelper rstats
class SylSpecs excel

Textgrids["ðŸ“‚02a: Textgrids for Recordings"]
PitchTiers["ðŸ“‚02b: PitchTiers for Recordings"]
Picked["ðŸ“‚03: Chosen Recordings"]
PickedTG["ðŸ“‚03a: Chosen TextGrids"]
FixedTG["ðŸ“‚03b: Fixed TextGrids"]
EDA(Summary statistics &amp; EDA with raw files)
%%    PlotHelpers --&gt; RawEDA
    Textgrids &amp; PitchTiers  --&gt; RawEDA --&gt; EDA
    EDA -- Match recordings, pick best exemplars --&gt; Picked
    Picked -.- PickedTG
    SylSpecs &amp; PickedTG --&gt; SylHelper
    SylHelper -- Add tiers, adjust boundaries --&gt; FixedTG
</pre>
<div id="mermaid-tooltip-2" class="mermaidTooltip">

</div>
<p></p>
</div>
</div>
</div>
<p>The next part of the process has three contributions. First, we can get an exploratory look at the recordings to get an exploratory look at the distribution of recordings. Second, we can decide which recordings are the best exemplars to use for later steps of this process. Third, we use the results of the exploratory analysis to decide on the durations to use for standardizing the nuclear tune length.</p>
<section id="averaging-process" class="level3">
<h3 class="anchored" data-anchor-id="averaging-process">Averaging process</h3>
<p>This flowchart expands on how the durations are calculated. This is done by first calculating the average duration for each utterance-tune pairing from all takes of that pairing. Second, we calculate the average duration of an utterance based on its average duration in each tune condition; this is done to avoid skewing averages towards a tune that had more recordings than the other tunes. Once we have the average durations for each utterance, we calculate how much each recording of that utterance would need to be scaled to reach the average duration. A file for each utterance-tune pairing is selected for further manipulation based on which take is closest (i.e., requires the least amount of scaling) to reach the target duration.</p>
<p>The textgrids for these recordings (~64) are manually checked to verify the output of the MFA with particular attention for the boundaries of phones on a syllable or word boundary. These TextGrids have the following format, note the addition of nuclear and syllable interval tiers:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tg.read</span>(<span class="st">"03_ChosenRecordings/FixedTextGrids/branning_01_HLL_002.TextGrid"</span>, </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>        <span class="st">'auto'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>branning_01_HLL_002.TextGrid
[                words: 4/6 labeled intervals from 0 to 1.44                   ]
[                phones: 15/17 labeled intervals from 0 to 1.44                ]
[                nuclear: 1/3 labeled intervals from 0 to 1.44                 ]
[                syllable: 2/4 labeled intervals from 0 to 1.44                ] </code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<p>
</p><pre class="mermaid" data-tooltip-selector="#mermaid-tooltip-3">flowchart LR
classDef rstats fill:#6FA1D0,stroke:#245AAB,color:#ffffff;
GetDurTiers[[make_duration_tiers.R]]
class GetDurTiers rstats


class PromoScript python
    subgraph HLL[HLL Takes]
        direction LR
        HLL:1 -.- HLL:... -.- HLL:n
    end
    muHLL[HLL Average]
    HLL --&gt; muHLL
    subgraph LHH[LHH Takes]
        direction LR
        LHH:1 -.- LHH:... -.- LHH:n
    end
    muLHH[LHH Average]
    LHH --&gt; muLHH
    subgraph LHSLL[L+H*LL Takes]
        direction LR
        LHSLL:1 -.- LHSLL:... -.- LHSLL:n
    end
    muLHSLL[LHSLL Average]
    LHSLL --&gt; muLHSLL
    subgraph LSHLL[L*+HLL Takes]
        direction LR
        LSHLL:1 -.- LSHLL:... -.- LSHLL:n
    end
    muLSHLL[LSHLL Average]
    LSHLL --&gt; muLSHLL
    muHLL &amp; muLHH &amp; muLHSLL &amp; muLSHLL --&gt; average[Averaged Duration]
    average --&gt; GetDurTiers
</pre>
<div id="mermaid-tooltip-3" class="mermaidTooltip">

</div>
<p></p>
</div>
</div>
</div>
</section>
</section>
<section id="duration-manipulations" class="level2">
<h2 class="anchored" data-anchor-id="duration-manipulations">Duration manipulations</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<p>
</p><pre class="mermaid" data-tooltip-selector="#mermaid-tooltip-4">flowchart TD
classDef praat fill:#E46E85,stroke:#85144b,color:#ffffff;
classDef python fill:#366994,stroke:#FFC331,color:#FFC331;
classDef rstats fill:#6FA1D0,stroke:#245AAB,color:#ffffff;
classDef shell fill:#111111,stroke:#2ECC40,color:#ffffff;
classDef excel fill:#17874E,stroke:#134130,color:#ffffff;

DurationScript[[apply_dt_manipulation.praat]]
DurationScript2[[apply_dt_manipulation.praat]]
TierHelper[[tiermanip_helpers.R]]

class RawEDA rstats
class PromoScript python
class GetDurTiers rstats
class DurationScript praat
class DurationScript2 praat
class SylHelper rstats
class TierHelper rstats
class SylSpecs excel

Picked["ðŸ“‚03: Chosen Recordings"]
FixedTG["ðŸ“‚03b: Fixed TextGrids"]
DurTiers["ðŸ“‚03c: Duration Tiers"]
AvgFiles["ðŸ“‚04: Scaled Recordings"]
DurTextGrids["ðŸ“‚04a: Duration-morphed TextGrids"]
NudgedFiles["ðŸ“‚05: Nudged Recordings"]
NudgedTextGrids["ðŸ“‚05b: Nudged TextGrids"]
NudgedDurationTiers["ðŸ“‚05a: Nudged DurationTiers"]

EDA(Summary statistics &amp; EDA with raw files)
%%    PlotHelpers --&gt; RawEDA
    FixedTG --&gt; TierHelper
    EDA -- Determine durations to use --&gt; TierHelper
    TierHelper --&gt; DurTiers &amp; DurTextGrids
    DurTextGrids -.- AvgFiles 
    DurTiers &amp; Picked --&gt; DurationScript --&gt; AvgFiles
    TierHelper --&gt; NudgedDurationTiers
    AvgFiles &amp; NudgedDurationTiers -- Reduce final syllable duration --&gt; DurationScript2
    DurationScript2 --&gt; NudgedFiles &amp; NudgedTextGrids
</pre>
<div id="mermaid-tooltip-4" class="mermaidTooltip">

</div>
<p></p>
</div>
</div>
</div>
<p>Once the chosen recordings are selected and their textgrids checked, a second round of averaging on the syllable level is done. Here, the average duration of each syllable is calculated. This is done separately for two- and three-syllable word sets. These averages serve as target syllable durations for each word. Duration Tiers are written for each file to scale the duration of each syllable of the nuclear word to the target values.</p>
<p>Duration Tiers technically have the same exact specification as Pitch Tiers, so Iâ€™ll show an example of what these duration tiers look like by treating it as a Pitch Tier. The Y-axis isnâ€™t perfect because the range of the values is very small (both endpoints round to 1) but below you can see the two rows of points on the ends are at 1, but thereâ€™s a region at 1.3 (appears as much higher) and a region at .94 (appears as slightly lower than 1). Thus, we see that for this recording, the first syllable needed to be stretched while the second syllable needed to be shrunk slightly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>durationtier <span class="ot">&lt;-</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dt.read</span>(<span class="st">"03_ChosenRecordings/DurationTiers/branning_01_HLL_002.DurationTier"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(durationtier)[<span class="st">'type'</span>] <span class="ot">&lt;-</span> <span class="st">"PitchTier"</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>durationtier</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>branning_01_HLL_002.DurationTier: 8 total pitch pulses.
1|                                                                             |
 |               OOOOOOOOOOOOOOOOOOOOOOO                                       |
 |                                                                             |
 |                                                                             |
 |                                                                             |
 |                                                                             |
 |                                                                             |
 |                                                                             |
 |OOOOOOOOOOOOOOO                                             OOOOOOOOOOOOOOOOO|
1|                                      OOOOOOOOOOOOOOOOOOOOOO                 |
 0                                                                          1.44 </code></pre>
</div>
</div>
<p>So far we have standardized the duration of the syllables using manually calculated duration tiers given target values from the average durations across utterances. A second duration manipulation is also applied where the final syllable in each word is shrunk by a constant value, such as .80 or .90. Because the syllables are already standardized, this value is applied in the same way to every file. This is done to correct for final lengthening that makes straight-line interpolation between the pitch accent and boundary tone targets sound a bit off. The value to shrink by is largely arbitrary, and we try reducing the duration of the final syllable in steps of 5%, from 100% (original duration) to 65% of the original duration. When listening to the final resynthesis, it seems like 85% or 80% works best.</p>
</section>
<section id="resynthesis" class="level2">
<h2 class="anchored" data-anchor-id="resynthesis">Resynthesis</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<p>
</p><pre class="mermaid" data-tooltip-selector="#mermaid-tooltip-5">flowchart TB
classDef praat fill:#E46E85,stroke:#85144b,color:#ffffff;
classDef python fill:#366994,stroke:#FFC331,color:#FFC331;
classDef rstats fill:#6FA1D0,stroke:#245AAB,color:#ffffff;
classDef shell fill:#111111,stroke:#2ECC40,color:#ffffff;

Exp1ResynthScript[[resynthesize_continua.praat]]
Exp2ResynthScript[[resynthesize_continua_exp2.praat]]
Exp3ResynthScript[[resynthesize_straight_alignment_continua.praat]]
Exp3cResynthScript[[resynthesize_curved_alignment_continua.praat]]
ResynthAnalysis[[resynthesis_analysis.qmd]]
BezierHelpers[[bezier_helpers.R]]

class Exp1ResynthScript praat
class Exp2ResynthScript praat
class Exp3ResynthScript praat
class Exp3cResynthScript praat
class ResynthAnalysis rstats
class BezierHelpers rstats

AvgFiles["ðŸ“‚05: Nudged Recordings"]
Exp1Resynth["ðŸ“‚06: Exp1 Resynthesized Recordings"]
Exp2Resynth["ðŸ“‚06b: Exp1 Resynthesized Recordings"]
Exp3Resynth["ðŸ“‚06c: Exp1 Resynthesized Recordings"]
Exp3cResynth["ðŸ“‚06cCurved: Exp1 Resynthesized Recordings"]
FixedFiles["ðŸ“‚07: Manually fixed Recordings"]
 
subgraph Resynthesis[Resynthesis]
  direction LR
  subgraph ResynthScripts[Resynthesis Scripts]
    direction TB
    Exp1ResynthScript ---
      Exp2ResynthScript ---
      Exp3ResynthScript ---
      Exp3cResynthScript
  end
  subgraph ResynthFiles[Resynthesized Files]
    direction TB
    Exp1Resynth ---
    Exp2Resynth ---
    Exp3Resynth ---
    Exp3cResynth
  end
  BezierHelpers -- Create curves --&gt; ResynthScripts
  ResynthScripts --&gt; ResynthFiles
end
AvgFiles --&gt; Resynthesis
Resynthesis --&gt; ResynthAnalysis
ResynthAnalysis --&gt; ResynthViz[Visualizations and Scripts for resynthesis debugging]
ResynthViz -- Check for resynthesis errors --&gt; FixedFiles
</pre>
<div id="mermaid-tooltip-5" class="mermaidTooltip">

</div>
<p></p>
</div>
</div>
</div>
<p>We can now resynthesize all of the averaged recordings. The <code>resynthesis_analysis.qmd</code> provides visualizations of the resynthesized files to double check that the resynthesis held. Sometimes rerunning the resynthesis on the file is good enough, but sometimes thereâ€™s a voice quality issue at play.</p>
<section id="experiment-1" class="level3">
<h3 class="anchored" data-anchor-id="experiment-1">Experiment 1</h3>
<p>This experiment uses the <code>Scripts/resynthesize_continua.praat</code> script, and the output is saved in <code>06_ResynthesizedRecordings</code></p>
</section>
<section id="experiment-2" class="level3">
<h3 class="anchored" data-anchor-id="experiment-2">Experiment 2</h3>
<p>This experiment uses the <code>Scripts/resynthesize_alignment_continua_exp2.praat</code> script, and the output is saved in <code>06b_ResynthesizedRecordingsExp2</code>.</p>
</section>
<section id="experiment-3" class="level3">
<h3 class="anchored" data-anchor-id="experiment-3">Experiment 3</h3>
<p>There are two versions:</p>
<ul>
<li><code>Scripts/resynthesize_straight_alignment_continua.praat</code> will give straight-line interpolations for a continuum of bitonal pitch accents that differ in alignment. Files saved in <code>06c_ResynthesizedRecordingsExp3</code></li>
<li><code>Scripts/resynthesize_curved_alignment_continua.praat</code> uses bezier curves to create curved interpolations for the onglides, but the trajectory from the peak to the boundary tone is still a straight line. Files saved in <code>06c_ResynthesizedRecordingsExp3CURVED</code></li>
</ul>
</section>
</section>
<section id="final-normalization-procedures" class="level2">
<h2 class="anchored" data-anchor-id="final-normalization-procedures">Final Normalization Procedures</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<p>
</p><pre class="mermaid" data-tooltip-selector="#mermaid-tooltip-6">flowchart TD
classDef praat fill:#E46E85,stroke:#85144b,color:#ffffff;
classDef python fill:#366994,stroke:#FFC331,color:#FFC331;
classDef rstats fill:#6FA1D0,stroke:#245AAB,color:#ffffff;
classDef shell fill:#111111,stroke:#2ECC40,color:#ffffff;

SilenceNormScript[[norm_silence.praat]]
RMSNormScript[[rms_norm.praat]]
FinalEDA[[stimuli_analyses.qmd]]

class SilenceNormScript praat
class RMSNormScript praat
class FinalEDA rstats

FixedFiles["ðŸ“‚06: Manually fixed Recordings"]
SilNormed["ðŸ“‚07: Silence Duration Normed Recordings"]
FinalFiles["ðŸ“‚08: Final Recordings"]
Cull["ðŸ“‚09: Culled Recordings"]

FixedFiles -- Norm Silence Durations --&gt; SilenceNormScript --&gt; SilNormed
    SilNormed -- RMS Norm  Intensity --&gt; RMSNormScript --&gt; FinalFiles
    FinalFiles -- Choose subset of files --&gt; Cull
    FinalStats([Plots and Statistics of final stimuli])
    Cull --&gt; FinalEDA --&gt; FinalStats
</pre>
<div id="mermaid-tooltip-6" class="mermaidTooltip">

</div>
<p></p>
</div>
</div>
</div>
</section>
<section id="automation" class="level1">
<h1>Automation</h1>
<p>Anything that does not absolutely require human intervention, such as the textgrid annotation at the very beginning, is automated. This includes running praat scripts, making duration calculations, and running analyses (after theyâ€™re written of course.) Automation is done via the <code>{targets}</code> R package, which provides makefile-like functionality through R. You can see the flowchart for the automated steps below, which reruns a target whenever an upstream dependency is modified (eg new file, removed file, edited file). Through this, we donâ€™t have to worry bout rerunning specific scripts in a specific order.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_glimpse</span>(<span class="at">targets_only =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-220f207a5530f5c6fa8e" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-220f207a5530f5c6fa8e">{"x":{"nodes":{"name":["render_spectral_measures","exp1_average_resynthesis","exp3curved_resynth_pt_df","bottomout_bitonal_render_tcog","exp2_average_resynthesis","bitonal_bottomout_resynth_pt_df","exp3_render_resynthesis_analysis","lhs_points","write_syllable_tgs_and_dts","syllable_durations","write_constant_scale_files","exp2_resynthesis_praatscript","resynth_pt_df","LHS_bottomout_resynth_pt_df","exp3_average_resynthesis","LHS_bottomout_render_resynthesis_analysis","exp3curved_render_resynthesis_analysis","process_textgrids","nuclear_words","hyp_nalignment","bitonal_bottomout_render_resynthesis_analysis","resynthesize_files","syllabification_spreadsheet","exp3curved_render_tcog","three_syl_words","extract_takes","exp3_resynthesize_files","selected_scaling_factor","extract_takes_script","monotonal_bottomout_average_resynthesis","resynthesis_praatscript","save_nuclear_regions_praatscript","LHS_bottomout_preprocess_resynthesis","bitonal_bottomout_make_nuclear_regions","bitonal_bottomout_resynthesize_files","generate_pitchtiers","bottomout_monotonal_render_tcog","average_contours","bottomout_LHS_render_tcog","run_force_aligner","gen_pitchtier_script","exp2_resynthesize_files","avg_phone_durations","exp3_bezier_points","monotonal_bottomout_resynthesize_files","bitonal_bottomout_praatscript","exp2_render_resynthesis_analysis","monotonal_bottomout_praatscript","exp2_resynth_pt_df","render_flowchart","preprocess_resynthesis","exp3_preprocess_resynthesis","bitonal_bottomout_average_resynthesis","directories_to_draw","monotonal_bottomout_render_resynthesis_analysis","draw_praatscript","process_pitchtiers","exp2_bezier_points","exp3_make_nuclear_regions","chosen_filepaths","exp2_preprocess_resynthesis","apply_dt_manipulation","exp3_resynth_pt_df","dir_01","LHS_bottomout_praatscript","utterance_to_draw","syllable_specification","textgrid_df","exp3straight_render_tcog","exp3curved_resynthesis_praatscript","exp2_make_nuclear_regions","monotonal_bottomout_make_nuclear_regions","apply_dt_nudges","bitonal_bottomout_preprocess_resynthesis","LHS_bottomout_resynthesize_files","chosen_files","get_all_spectral_measures","hyp_nsteps","exp3curved_resynthesize_files","assemble_resyntheses","files_to_omit","render_resynthesis_analysis","LHS_bottomout_average_resynthesis","LHS_bottomout_make_nuclear_regions","exp3curved_make_nuclear_regions","exp3_resynthesis_praatscript","make_nuclear_regions","exp3curved_preprocess_resynthesis","exp3curved_average_resynthesis","lsh_points","two_syl_words","scaling_factors_to_try","tune_order","draw_continua_praat_pictures","hyp_nbezier","monotonal_bottomout_resynth_pt_df","render_EDA","move_chosen_recordings","clear_old_recordings","monotonal_bottomout_preprocess_resynthesis","force_align_script"],"type":["stem","pattern","pattern","stem","pattern","stem","stem","stem","stem","stem","pattern","stem","pattern","stem","pattern","stem","stem","stem","stem","stem","stem","pattern","stem","stem","stem","stem","pattern","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","pattern","stem","stem","stem","stem","stem","stem","pattern","stem","pattern","pattern","stem","stem","stem","stem","stem","stem","pattern","stem","pattern","stem","pattern","stem","stem","stem","stem","stem","stem","stem","pattern","stem","pattern","stem","stem","stem","stem","stem","pattern","stem","stem","stem","stem","stem","pattern","stem","pattern","pattern","pattern","stem","stem","stem","stem","pattern","stem","stem","stem","stem","stem","stem","stem"],"status":["none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none"],"seconds":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"bytes":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"branches":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"label":["render_spectral_measures","exp1_average_resynthesis","exp3curved_resynth_pt_df","bottomout_bitonal_render_tcog","exp2_average_resynthesis","bitonal_bottomout_resynth_pt_df","exp3_render_resynthesis_analysis","lhs_points","write_syllable_tgs_and_dts","syllable_durations","write_constant_scale_files","exp2_resynthesis_praatscript","resynth_pt_df","LHS_bottomout_resynth_pt_df","exp3_average_resynthesis","LHS_bottomout_render_resynthesis_analysis","exp3curved_render_resynthesis_analysis","process_textgrids","nuclear_words","hyp_nalignment","bitonal_bottomout_render_resynthesis_analysis","resynthesize_files","syllabification_spreadsheet","exp3curved_render_tcog","three_syl_words","extract_takes","exp3_resynthesize_files","selected_scaling_factor","extract_takes_script","monotonal_bottomout_average_resynthesis","resynthesis_praatscript","save_nuclear_regions_praatscript","LHS_bottomout_preprocess_resynthesis","bitonal_bottomout_make_nuclear_regions","bitonal_bottomout_resynthesize_files","generate_pitchtiers","bottomout_monotonal_render_tcog","average_contours","bottomout_LHS_render_tcog","run_force_aligner","gen_pitchtier_script","exp2_resynthesize_files","avg_phone_durations","exp3_bezier_points","monotonal_bottomout_resynthesize_files","bitonal_bottomout_praatscript","exp2_render_resynthesis_analysis","monotonal_bottomout_praatscript","exp2_resynth_pt_df","render_flowchart","preprocess_resynthesis","exp3_preprocess_resynthesis","bitonal_bottomout_average_resynthesis","directories_to_draw","monotonal_bottomout_render_resynthesis_analysis","draw_praatscript","process_pitchtiers","exp2_bezier_points","exp3_make_nuclear_regions","chosen_filepaths","exp2_preprocess_resynthesis","apply_dt_manipulation","exp3_resynth_pt_df","dir_01","LHS_bottomout_praatscript","utterance_to_draw","syllable_specification","textgrid_df","exp3straight_render_tcog","exp3curved_resynthesis_praatscript","exp2_make_nuclear_regions","monotonal_bottomout_make_nuclear_regions","apply_dt_nudges","bitonal_bottomout_preprocess_resynthesis","LHS_bottomout_resynthesize_files","chosen_files","get_all_spectral_measures","hyp_nsteps","exp3curved_resynthesize_files","assemble_resyntheses","files_to_omit","render_resynthesis_analysis","LHS_bottomout_average_resynthesis","LHS_bottomout_make_nuclear_regions","exp3curved_make_nuclear_regions","exp3_resynthesis_praatscript","make_nuclear_regions","exp3curved_preprocess_resynthesis","exp3curved_average_resynthesis","lsh_points","two_syl_words","scaling_factors_to_try","tune_order","draw_continua_praat_pictures","hyp_nbezier","monotonal_bottomout_resynth_pt_df","render_EDA","move_chosen_recordings","clear_old_recordings","monotonal_bottomout_preprocess_resynthesis","force_align_script"],"color":["#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac"],"id":["render_spectral_measures","exp1_average_resynthesis","exp3curved_resynth_pt_df","bottomout_bitonal_render_tcog","exp2_average_resynthesis","bitonal_bottomout_resynth_pt_df","exp3_render_resynthesis_analysis","lhs_points","write_syllable_tgs_and_dts","syllable_durations","write_constant_scale_files","exp2_resynthesis_praatscript","resynth_pt_df","LHS_bottomout_resynth_pt_df","exp3_average_resynthesis","LHS_bottomout_render_resynthesis_analysis","exp3curved_render_resynthesis_analysis","process_textgrids","nuclear_words","hyp_nalignment","bitonal_bottomout_render_resynthesis_analysis","resynthesize_files","syllabification_spreadsheet","exp3curved_render_tcog","three_syl_words","extract_takes","exp3_resynthesize_files","selected_scaling_factor","extract_takes_script","monotonal_bottomout_average_resynthesis","resynthesis_praatscript","save_nuclear_regions_praatscript","LHS_bottomout_preprocess_resynthesis","bitonal_bottomout_make_nuclear_regions","bitonal_bottomout_resynthesize_files","generate_pitchtiers","bottomout_monotonal_render_tcog","average_contours","bottomout_LHS_render_tcog","run_force_aligner","gen_pitchtier_script","exp2_resynthesize_files","avg_phone_durations","exp3_bezier_points","monotonal_bottomout_resynthesize_files","bitonal_bottomout_praatscript","exp2_render_resynthesis_analysis","monotonal_bottomout_praatscript","exp2_resynth_pt_df","render_flowchart","preprocess_resynthesis","exp3_preprocess_resynthesis","bitonal_bottomout_average_resynthesis","directories_to_draw","monotonal_bottomout_render_resynthesis_analysis","draw_praatscript","process_pitchtiers","exp2_bezier_points","exp3_make_nuclear_regions","chosen_filepaths","exp2_preprocess_resynthesis","apply_dt_manipulation","exp3_resynth_pt_df","dir_01","LHS_bottomout_praatscript","utterance_to_draw","syllable_specification","textgrid_df","exp3straight_render_tcog","exp3curved_resynthesis_praatscript","exp2_make_nuclear_regions","monotonal_bottomout_make_nuclear_regions","apply_dt_nudges","bitonal_bottomout_preprocess_resynthesis","LHS_bottomout_resynthesize_files","chosen_files","get_all_spectral_measures","hyp_nsteps","exp3curved_resynthesize_files","assemble_resyntheses","files_to_omit","render_resynthesis_analysis","LHS_bottomout_average_resynthesis","LHS_bottomout_make_nuclear_regions","exp3curved_make_nuclear_regions","exp3_resynthesis_praatscript","make_nuclear_regions","exp3curved_preprocess_resynthesis","exp3curved_average_resynthesis","lsh_points","two_syl_words","scaling_factors_to_try","tune_order","draw_continua_praat_pictures","hyp_nbezier","monotonal_bottomout_resynth_pt_df","render_EDA","move_chosen_recordings","clear_old_recordings","monotonal_bottomout_preprocess_resynthesis","force_align_script"],"level":[2,18,16,20,18,16,20,1,11,9,13,1,16,16,18,20,20,6,2,1,20,15,1,20,1,3,15,1,1,18,1,1,17,16,15,4,20,6,20,5,1,15,8,2,15,1,20,1,16,2,17,17,18,2,20,1,5,2,16,9,17,12,16,1,1,1,2,3,20,1,16,16,14,17,15,8,1,1,15,19,4,20,18,16,16,1,16,17,18,1,1,1,1,20,1,16,7,10,2,17,1],"shape":["dot","square","square","dot","square","dot","dot","dot","dot","dot","square","dot","square","dot","square","dot","dot","dot","dot","dot","dot","square","dot","dot","dot","dot","square","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","square","dot","dot","dot","dot","dot","dot","square","dot","square","square","dot","dot","dot","dot","dot","dot","square","dot","square","dot","square","dot","dot","dot","dot","dot","dot","dot","square","dot","square","dot","dot","dot","dot","dot","square","dot","dot","dot","dot","dot","square","dot","square","square","square","dot","dot","dot","dot","square","dot","dot","dot","dot","dot","dot","dot"]},"edges":{"from":["get_all_spectral_measures","preprocess_resynthesis","tune_order","exp3curved_resynthesize_files","assemble_resyntheses","lhs_points","lsh_points","syllable_specification","three_syl_words","exp2_preprocess_resynthesis","tune_order","bitonal_bottomout_resynthesize_files","assemble_resyntheses","chosen_files","move_chosen_recordings","syllable_durations","syllable_specification","avg_phone_durations","syllable_specification","apply_dt_manipulation","scaling_factors_to_try","resynthesize_files","LHS_bottomout_resynthesize_files","exp3_preprocess_resynthesis","tune_order","assemble_resyntheses","assemble_resyntheses","run_force_aligner","three_syl_words","two_syl_words","assemble_resyntheses","apply_dt_nudges","hyp_nsteps","resynthesis_praatscript","assemble_resyntheses","lhs_points","lsh_points","selected_scaling_factor","syllable_specification","three_syl_words","clear_old_recordings","extract_takes_script","apply_dt_nudges","exp3_resynthesis_praatscript","hyp_nsteps","monotonal_bottomout_preprocess_resynthesis","tune_order","LHS_bottomout_make_nuclear_regions","LHS_bottomout_resynth_pt_df","LHS_bottomout_resynthesize_files","three_syl_words","tune_order","bitonal_bottomout_resynthesize_files","apply_dt_nudges","bitonal_bottomout_praatscript","hyp_nalignment","hyp_nbezier","hyp_nsteps","extract_takes","gen_pitchtier_script","assemble_resyntheses","lhs_points","lsh_points","syllable_specification","three_syl_words","files_to_omit","nuclear_words","process_pitchtiers","textgrid_df","three_syl_words","tune_order","assemble_resyntheses","lhs_points","lsh_points","syllable_specification","three_syl_words","force_align_script","generate_pitchtiers","apply_dt_nudges","exp2_bezier_points","exp2_resynthesis_praatscript","hyp_nbezier","hyp_nsteps","render_EDA","hyp_nalignment","hyp_nbezier","lhs_points","lsh_points","apply_dt_nudges","hyp_nsteps","monotonal_bottomout_praatscript","assemble_resyntheses","exp2_resynthesize_files","force_align_script","make_nuclear_regions","resynth_pt_df","resynthesize_files","three_syl_words","tune_order","exp3_make_nuclear_regions","exp3_resynth_pt_df","exp3_resynthesize_files","three_syl_words","tune_order","bitonal_bottomout_preprocess_resynthesis","tune_order","selected_scaling_factor","assemble_resyntheses","generate_pitchtiers","hyp_nbezier","hyp_nsteps","exp3_resynthesize_files","chosen_files","exp2_make_nuclear_regions","exp2_resynth_pt_df","exp2_resynthesize_files","three_syl_words","tune_order","move_chosen_recordings","write_syllable_tgs_and_dts","exp3_resynthesize_files","syllabification_spreadsheet","nuclear_words","three_syl_words","assemble_resyntheses","lhs_points","lsh_points","selected_scaling_factor","syllable_specification","three_syl_words","exp2_resynthesize_files","monotonal_bottomout_resynthesize_files","write_constant_scale_files","bitonal_bottomout_make_nuclear_regions","bitonal_bottomout_resynth_pt_df","bitonal_bottomout_resynthesize_files","three_syl_words","tune_order","apply_dt_nudges","hyp_nsteps","LHS_bottomout_praatscript","render_EDA","apply_dt_nudges","exp3_bezier_points","exp3curved_resynthesis_praatscript","hyp_nalignment","hyp_nbezier","hyp_nsteps","bitonal_bottomout_average_resynthesis","exp1_average_resynthesis","exp2_average_resynthesis","exp3_average_resynthesis","exp3curved_average_resynthesis","LHS_bottomout_average_resynthesis","monotonal_bottomout_average_resynthesis","textgrid_df","assemble_resyntheses","LHS_bottomout_preprocess_resynthesis","tune_order","LHS_bottomout_resynthesize_files","exp3curved_resynthesize_files","resynthesize_files","save_nuclear_regions_praatscript","exp3curved_make_nuclear_regions","exp3curved_resynth_pt_df","exp3curved_resynthesize_files","three_syl_words","tune_order","exp3curved_preprocess_resynthesis","tune_order","assemble_resyntheses","directories_to_draw","draw_praatscript","utterance_to_draw","monotonal_bottomout_resynthesize_files","average_contours","files_to_omit","process_pitchtiers","process_textgrids","chosen_filepaths","dir_01","monotonal_bottomout_make_nuclear_regions","monotonal_bottomout_resynth_pt_df","monotonal_bottomout_resynthesize_files","three_syl_words","tune_order"],"to":["render_spectral_measures","exp1_average_resynthesis","exp1_average_resynthesis","exp3curved_resynth_pt_df","bottomout_bitonal_render_tcog","bottomout_bitonal_render_tcog","bottomout_bitonal_render_tcog","bottomout_bitonal_render_tcog","bottomout_bitonal_render_tcog","exp2_average_resynthesis","exp2_average_resynthesis","bitonal_bottomout_resynth_pt_df","exp3_render_resynthesis_analysis","write_syllable_tgs_and_dts","write_syllable_tgs_and_dts","write_syllable_tgs_and_dts","write_syllable_tgs_and_dts","syllable_durations","syllable_durations","write_constant_scale_files","write_constant_scale_files","resynth_pt_df","LHS_bottomout_resynth_pt_df","exp3_average_resynthesis","exp3_average_resynthesis","LHS_bottomout_render_resynthesis_analysis","exp3curved_render_resynthesis_analysis","process_textgrids","nuclear_words","nuclear_words","bitonal_bottomout_render_resynthesis_analysis","resynthesize_files","resynthesize_files","resynthesize_files","exp3curved_render_tcog","exp3curved_render_tcog","exp3curved_render_tcog","exp3curved_render_tcog","exp3curved_render_tcog","exp3curved_render_tcog","extract_takes","extract_takes","exp3_resynthesize_files","exp3_resynthesize_files","exp3_resynthesize_files","monotonal_bottomout_average_resynthesis","monotonal_bottomout_average_resynthesis","LHS_bottomout_preprocess_resynthesis","LHS_bottomout_preprocess_resynthesis","LHS_bottomout_preprocess_resynthesis","LHS_bottomout_preprocess_resynthesis","LHS_bottomout_preprocess_resynthesis","bitonal_bottomout_make_nuclear_regions","bitonal_bottomout_resynthesize_files","bitonal_bottomout_resynthesize_files","bitonal_bottomout_resynthesize_files","bitonal_bottomout_resynthesize_files","bitonal_bottomout_resynthesize_files","generate_pitchtiers","generate_pitchtiers","bottomout_monotonal_render_tcog","bottomout_monotonal_render_tcog","bottomout_monotonal_render_tcog","bottomout_monotonal_render_tcog","bottomout_monotonal_render_tcog","average_contours","average_contours","average_contours","average_contours","average_contours","average_contours","bottomout_LHS_render_tcog","bottomout_LHS_render_tcog","bottomout_LHS_render_tcog","bottomout_LHS_render_tcog","bottomout_LHS_render_tcog","run_force_aligner","run_force_aligner","exp2_resynthesize_files","exp2_resynthesize_files","exp2_resynthesize_files","exp2_resynthesize_files","exp2_resynthesize_files","avg_phone_durations","exp3_bezier_points","exp3_bezier_points","exp3_bezier_points","exp3_bezier_points","monotonal_bottomout_resynthesize_files","monotonal_bottomout_resynthesize_files","monotonal_bottomout_resynthesize_files","exp2_render_resynthesis_analysis","exp2_resynth_pt_df","render_flowchart","preprocess_resynthesis","preprocess_resynthesis","preprocess_resynthesis","preprocess_resynthesis","preprocess_resynthesis","exp3_preprocess_resynthesis","exp3_preprocess_resynthesis","exp3_preprocess_resynthesis","exp3_preprocess_resynthesis","exp3_preprocess_resynthesis","bitonal_bottomout_average_resynthesis","bitonal_bottomout_average_resynthesis","directories_to_draw","monotonal_bottomout_render_resynthesis_analysis","process_pitchtiers","exp2_bezier_points","exp2_bezier_points","exp3_make_nuclear_regions","chosen_filepaths","exp2_preprocess_resynthesis","exp2_preprocess_resynthesis","exp2_preprocess_resynthesis","exp2_preprocess_resynthesis","exp2_preprocess_resynthesis","apply_dt_manipulation","apply_dt_manipulation","exp3_resynth_pt_df","syllable_specification","textgrid_df","textgrid_df","exp3straight_render_tcog","exp3straight_render_tcog","exp3straight_render_tcog","exp3straight_render_tcog","exp3straight_render_tcog","exp3straight_render_tcog","exp2_make_nuclear_regions","monotonal_bottomout_make_nuclear_regions","apply_dt_nudges","bitonal_bottomout_preprocess_resynthesis","bitonal_bottomout_preprocess_resynthesis","bitonal_bottomout_preprocess_resynthesis","bitonal_bottomout_preprocess_resynthesis","bitonal_bottomout_preprocess_resynthesis","LHS_bottomout_resynthesize_files","LHS_bottomout_resynthesize_files","LHS_bottomout_resynthesize_files","chosen_files","exp3curved_resynthesize_files","exp3curved_resynthesize_files","exp3curved_resynthesize_files","exp3curved_resynthesize_files","exp3curved_resynthesize_files","exp3curved_resynthesize_files","assemble_resyntheses","assemble_resyntheses","assemble_resyntheses","assemble_resyntheses","assemble_resyntheses","assemble_resyntheses","assemble_resyntheses","files_to_omit","render_resynthesis_analysis","LHS_bottomout_average_resynthesis","LHS_bottomout_average_resynthesis","LHS_bottomout_make_nuclear_regions","exp3curved_make_nuclear_regions","make_nuclear_regions","make_nuclear_regions","exp3curved_preprocess_resynthesis","exp3curved_preprocess_resynthesis","exp3curved_preprocess_resynthesis","exp3curved_preprocess_resynthesis","exp3curved_preprocess_resynthesis","exp3curved_average_resynthesis","exp3curved_average_resynthesis","draw_continua_praat_pictures","draw_continua_praat_pictures","draw_continua_praat_pictures","draw_continua_praat_pictures","monotonal_bottomout_resynth_pt_df","render_EDA","render_EDA","render_EDA","render_EDA","move_chosen_recordings","clear_old_recordings","monotonal_bottomout_preprocess_resynthesis","monotonal_bottomout_preprocess_resynthesis","monotonal_bottomout_preprocess_resynthesis","monotonal_bottomout_preprocess_resynthesis","monotonal_bottomout_preprocess_resynthesis"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Stem","Pattern"],"shape":["dot","square"],"color":["#899DA4","#899DA4"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<!-- -->

</section>


<div id="quarto-appendix" class="default"><section class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1" role="doc-endnote"><p>I wrote these custom print method for TextGrids and PitchTiers as part of the <code>sosprosody</code> package, available on my github at <a href="https://github.com/tsostarics/sosprosody">tsostarics/sosprosody</a><a href="#fnref1" class="footnote-back" role="doc-backlink">â†©ï¸Ž</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb17" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Stimulus Flowchart"</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co">    page-layout: full</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-responsive: false</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-align: center</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> source</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rPraat)</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sosprosody)</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(targets)</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="fu">## Recording and Setup</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a><span class="in">```{mermaid}</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>flowchart TD</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>classDef praat fill:<span class="co">#E46E85,stroke:#85144b,color:#ffffff;</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>classDef python fill:<span class="co">#366994,stroke:#FFC331,color:#FFC331;</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>classDef rstats fill:<span class="co">#6FA1D0,stroke:#245AAB,color:#ffffff;</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>classDef shell fill:<span class="co">#111111,stroke:#2ECC40,color:#ffffff;</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>%% Files to make</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>TriggerScript[[trigger2tg.praat]]</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>ExtractTakes[[extract_takes.praat]]</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>MFA[[force_align.sh]]</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>PitchTierScript[[gen_manips_pitchtier.praat]]</span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>class TriggerScript praat</span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>class ExtractTakes praat</span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>class MFA shell</span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>class PitchTierScript praat</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>%% Define Directories</span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>RawRec[<span class="ot">"</span><span class="st">ðŸ“‚00: Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>MonoRec[<span class="ot">"</span><span class="st">ðŸ“‚01: Mono Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>PossibleRecs[<span class="ot">"</span><span class="st">ðŸ“‚02: Possible Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>Textgrids[<span class="ot">"</span><span class="st">ðŸ“‚02a: Textgrids for Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>PitchTiers[<span class="ot">"</span><span class="st">ðŸ“‚02b: PitchTiers for Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a>RawRec -- Extract mono channel --&gt; TriggerScript --&gt; MonoRec</span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a>    MonoRec -- Annotate textgrid to denote OK takes --&gt; ExtractTakes</span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a>    ExtractTakes --&gt; PossibleRecs</span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>    PossibleRecs --&gt; MFA -- Standardized textgrid annotations --&gt; Textgrids</span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a>    PossibleRecs --&gt; PitchTierScript --&gt; PitchTiers</span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a>This portion of the process has most of the manual labor.</span>
<span id="cb17-65"><a href="#cb17-65" aria-hidden="true" tabindex="-1"></a>After the recordings are done, I use the <span class="in">`trigger2tg.praat`</span> script to segment</span>
<span id="cb17-66"><a href="#cb17-66" aria-hidden="true" tabindex="-1"></a>the individual target utterances, which contain ***many takes*** of the same sentence.</span>
<span id="cb17-67"><a href="#cb17-67" aria-hidden="true" tabindex="-1"></a>Then, I listen to all the takes and denote which ones are OK enough to </span>
<span id="cb17-68"><a href="#cb17-68" aria-hidden="true" tabindex="-1"></a>possibly use later, which are marked on a TextGrid with the following format:<span class="ot">[^tgformat]</span></span>
<span id="cb17-69"><a href="#cb17-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-70"><a href="#cb17-70" aria-hidden="true" tabindex="-1"></a><span class="ot">[^tgformat]: </span>I wrote these custom print method for TextGrids and PitchTiers</span>
<span id="cb17-71"><a href="#cb17-71" aria-hidden="true" tabindex="-1"></a>as part of the <span class="in">`sosprosody`</span> package, available on my github at <span class="co">[</span><span class="ot">tsostarics/sosprosody</span><span class="co">](https://github.com/tsostarics/sosprosody)</span></span>
<span id="cb17-72"><a href="#cb17-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-75"><a href="#cb17-75" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-76"><a href="#cb17-76" aria-hidden="true" tabindex="-1"></a><span class="fu">tg.read</span>(<span class="st">"01_Mono/exp1_raw_3syl_01_HLL.TextGrid"</span>)</span>
<span id="cb17-77"><a href="#cb17-77" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-78"><a href="#cb17-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-79"><a href="#cb17-79" aria-hidden="true" tabindex="-1"></a>The <span class="in">`extract_takes.praat`</span> script automatically extracts all of the takes</span>
<span id="cb17-80"><a href="#cb17-80" aria-hidden="true" tabindex="-1"></a>annotated on the second tier above, saving separate <span class="in">`.wav`</span> files and TextGrids.</span>
<span id="cb17-81"><a href="#cb17-81" aria-hidden="true" tabindex="-1"></a>These textgrids have a single tier/interval containing the utterance, which</span>
<span id="cb17-82"><a href="#cb17-82" aria-hidden="true" tabindex="-1"></a>is fed into the force alignment step.</span>
<span id="cb17-83"><a href="#cb17-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-86"><a href="#cb17-86" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-87"><a href="#cb17-87" aria-hidden="true" tabindex="-1"></a><span class="fu">tg.read</span>(<span class="st">"02_PossibleRecordings/grandmother_01_LHH_001.TextGrid"</span>)</span>
<span id="cb17-88"><a href="#cb17-88" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-89"><a href="#cb17-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-90"><a href="#cb17-90" aria-hidden="true" tabindex="-1"></a><span class="fu">### Force-aligned TextGrids and PitchTiers</span></span>
<span id="cb17-91"><a href="#cb17-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-92"><a href="#cb17-92" aria-hidden="true" tabindex="-1"></a>The force alignment step uses the Montreal Force Aligner with the dictionary</span>
<span id="cb17-93"><a href="#cb17-93" aria-hidden="true" tabindex="-1"></a>and acoustic model as specified in the commands below.</span>
<span id="cb17-94"><a href="#cb17-94" aria-hidden="true" tabindex="-1"></a>Log files are saved for the validation and align procedures.</span>
<span id="cb17-95"><a href="#cb17-95" aria-hidden="true" tabindex="-1"></a>Note that there's some new out of vocabular words that were added to the</span>
<span id="cb17-96"><a href="#cb17-96" aria-hidden="true" tabindex="-1"></a>dictionary, see the <span class="in">`README`</span> for details.</span>
<span id="cb17-97"><a href="#cb17-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-100"><a href="#cb17-100" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-101"><a href="#cb17-101" aria-hidden="true" tabindex="-1"></a><span class="fu">read_lines</span>(<span class="fu">tar_read</span>(force_align_script))</span>
<span id="cb17-102"><a href="#cb17-102" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-103"><a href="#cb17-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-104"><a href="#cb17-104" aria-hidden="true" tabindex="-1"></a>The resulting text grids have the following standardized format:</span>
<span id="cb17-105"><a href="#cb17-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-108"><a href="#cb17-108" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-109"><a href="#cb17-109" aria-hidden="true" tabindex="-1"></a><span class="fu">tg.read</span>(<span class="st">"02_PossibleRecordings/MFA_textgrids/grandmother_01_LHH_001.TextGrid"</span>)</span>
<span id="cb17-110"><a href="#cb17-110" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-111"><a href="#cb17-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-112"><a href="#cb17-112" aria-hidden="true" tabindex="-1"></a>To make corresponding PitchTier files, the <span class="in">`gen_manips_pitchtier.praat`</span> script</span>
<span id="cb17-113"><a href="#cb17-113" aria-hidden="true" tabindex="-1"></a>is used. The pitchtiers look like this:</span>
<span id="cb17-114"><a href="#cb17-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-117"><a href="#cb17-117" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-118"><a href="#cb17-118" aria-hidden="true" tabindex="-1"></a><span class="fu">pt.read</span>(<span class="st">"02_PossibleRecordings/PitchTiers/grandmother_01_LHH_001.PitchTier"</span>)</span>
<span id="cb17-119"><a href="#cb17-119" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-120"><a href="#cb17-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-121"><a href="#cb17-121" aria-hidden="true" tabindex="-1"></a><span class="fu">## Selecting recordings</span></span>
<span id="cb17-122"><a href="#cb17-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-125"><a href="#cb17-125" aria-hidden="true" tabindex="-1"></a><span class="in">```{mermaid}</span></span>
<span id="cb17-126"><a href="#cb17-126" aria-hidden="true" tabindex="-1"></a>%%| fig-align: center</span>
<span id="cb17-127"><a href="#cb17-127" aria-hidden="true" tabindex="-1"></a>flowchart TD</span>
<span id="cb17-128"><a href="#cb17-128" aria-hidden="true" tabindex="-1"></a>classDef praat fill:<span class="co">#E46E85,stroke:#85144b,color:#ffffff;</span></span>
<span id="cb17-129"><a href="#cb17-129" aria-hidden="true" tabindex="-1"></a>classDef python fill:<span class="co">#366994,stroke:#FFC331,color:#FFC331;</span></span>
<span id="cb17-130"><a href="#cb17-130" aria-hidden="true" tabindex="-1"></a>classDef rstats fill:<span class="co">#6FA1D0,stroke:#245AAB,color:#ffffff;</span></span>
<span id="cb17-131"><a href="#cb17-131" aria-hidden="true" tabindex="-1"></a>classDef shell fill:<span class="co">#111111,stroke:#2ECC40,color:#ffffff;</span></span>
<span id="cb17-132"><a href="#cb17-132" aria-hidden="true" tabindex="-1"></a>classDef excel fill:<span class="co">#17874E,stroke:#134130,color:#ffffff;</span></span>
<span id="cb17-133"><a href="#cb17-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-134"><a href="#cb17-134" aria-hidden="true" tabindex="-1"></a>RawEDA[[raw_recordings_eda.qmd]]</span>
<span id="cb17-135"><a href="#cb17-135" aria-hidden="true" tabindex="-1"></a>SylHelper[[syllable_helpers.R]]</span>
<span id="cb17-136"><a href="#cb17-136" aria-hidden="true" tabindex="-1"></a>SylSpecs[[syllabification.csv]]</span>
<span id="cb17-137"><a href="#cb17-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-138"><a href="#cb17-138" aria-hidden="true" tabindex="-1"></a>class RawEDA rstats</span>
<span id="cb17-139"><a href="#cb17-139" aria-hidden="true" tabindex="-1"></a>class PromoScript python</span>
<span id="cb17-140"><a href="#cb17-140" aria-hidden="true" tabindex="-1"></a>class GetDurTiers rstats</span>
<span id="cb17-141"><a href="#cb17-141" aria-hidden="true" tabindex="-1"></a>class DurationScript praat</span>
<span id="cb17-142"><a href="#cb17-142" aria-hidden="true" tabindex="-1"></a>class DurationScript2 praat</span>
<span id="cb17-143"><a href="#cb17-143" aria-hidden="true" tabindex="-1"></a>class SylHelper rstats</span>
<span id="cb17-144"><a href="#cb17-144" aria-hidden="true" tabindex="-1"></a>class TierHelper rstats</span>
<span id="cb17-145"><a href="#cb17-145" aria-hidden="true" tabindex="-1"></a>class SylSpecs excel</span>
<span id="cb17-146"><a href="#cb17-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-147"><a href="#cb17-147" aria-hidden="true" tabindex="-1"></a>Textgrids[<span class="ot">"</span><span class="st">ðŸ“‚02a: Textgrids for Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-148"><a href="#cb17-148" aria-hidden="true" tabindex="-1"></a>PitchTiers[<span class="ot">"</span><span class="st">ðŸ“‚02b: PitchTiers for Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-149"><a href="#cb17-149" aria-hidden="true" tabindex="-1"></a>Picked[<span class="ot">"</span><span class="st">ðŸ“‚03: Chosen Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-150"><a href="#cb17-150" aria-hidden="true" tabindex="-1"></a>PickedTG[<span class="ot">"</span><span class="st">ðŸ“‚03a: Chosen TextGrids</span><span class="ot">"</span>]</span>
<span id="cb17-151"><a href="#cb17-151" aria-hidden="true" tabindex="-1"></a>FixedTG[<span class="ot">"</span><span class="st">ðŸ“‚03b: Fixed TextGrids</span><span class="ot">"</span>]</span>
<span id="cb17-152"><a href="#cb17-152" aria-hidden="true" tabindex="-1"></a>EDA(Summary statistics &amp; EDA with raw files)</span>
<span id="cb17-153"><a href="#cb17-153" aria-hidden="true" tabindex="-1"></a>%%    PlotHelpers --&gt; RawEDA</span>
<span id="cb17-154"><a href="#cb17-154" aria-hidden="true" tabindex="-1"></a>    Textgrids &amp; PitchTiers  --&gt; RawEDA --&gt; EDA</span>
<span id="cb17-155"><a href="#cb17-155" aria-hidden="true" tabindex="-1"></a>    EDA -- Match recordings, pick best exemplars --&gt; Picked</span>
<span id="cb17-156"><a href="#cb17-156" aria-hidden="true" tabindex="-1"></a>    Picked -.- PickedTG</span>
<span id="cb17-157"><a href="#cb17-157" aria-hidden="true" tabindex="-1"></a>    SylSpecs &amp; PickedTG --&gt; SylHelper</span>
<span id="cb17-158"><a href="#cb17-158" aria-hidden="true" tabindex="-1"></a>    SylHelper -- Add tiers, adjust boundaries --&gt; FixedTG</span>
<span id="cb17-159"><a href="#cb17-159" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-160"><a href="#cb17-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-161"><a href="#cb17-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-162"><a href="#cb17-162" aria-hidden="true" tabindex="-1"></a>The next part of the process has three contributions.</span>
<span id="cb17-163"><a href="#cb17-163" aria-hidden="true" tabindex="-1"></a>First, we can get an exploratory look at the recordings to get an exploratory</span>
<span id="cb17-164"><a href="#cb17-164" aria-hidden="true" tabindex="-1"></a>look at the distribution of recordings.</span>
<span id="cb17-165"><a href="#cb17-165" aria-hidden="true" tabindex="-1"></a>Second, we can decide which recordings are the best exemplars to use for later</span>
<span id="cb17-166"><a href="#cb17-166" aria-hidden="true" tabindex="-1"></a>steps of this process.</span>
<span id="cb17-167"><a href="#cb17-167" aria-hidden="true" tabindex="-1"></a>Third, we use the results of the exploratory analysis to decide on the durations to use for standardizing the nuclear tune length.</span>
<span id="cb17-168"><a href="#cb17-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-169"><a href="#cb17-169" aria-hidden="true" tabindex="-1"></a><span class="fu">### Averaging process</span></span>
<span id="cb17-170"><a href="#cb17-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-171"><a href="#cb17-171" aria-hidden="true" tabindex="-1"></a>This flowchart expands on how the durations are calculated.</span>
<span id="cb17-172"><a href="#cb17-172" aria-hidden="true" tabindex="-1"></a>This is done by first calculating the average duration for each utterance-tune pairing</span>
<span id="cb17-173"><a href="#cb17-173" aria-hidden="true" tabindex="-1"></a>from all takes of that pairing.</span>
<span id="cb17-174"><a href="#cb17-174" aria-hidden="true" tabindex="-1"></a>Second, we calculate the average duration of an utterance based on its average</span>
<span id="cb17-175"><a href="#cb17-175" aria-hidden="true" tabindex="-1"></a>duration in each tune condition; this is done to avoid skewing averages towards</span>
<span id="cb17-176"><a href="#cb17-176" aria-hidden="true" tabindex="-1"></a>a tune that had more recordings than the other tunes.</span>
<span id="cb17-177"><a href="#cb17-177" aria-hidden="true" tabindex="-1"></a>Once we have the average durations for each utterance, we calculate how</span>
<span id="cb17-178"><a href="#cb17-178" aria-hidden="true" tabindex="-1"></a>much each recording of that utterance would need to be scaled to reach the</span>
<span id="cb17-179"><a href="#cb17-179" aria-hidden="true" tabindex="-1"></a>average duration.</span>
<span id="cb17-180"><a href="#cb17-180" aria-hidden="true" tabindex="-1"></a>A file for each utterance-tune pairing is selected for further manipulation</span>
<span id="cb17-181"><a href="#cb17-181" aria-hidden="true" tabindex="-1"></a>based on which take is closest (i.e., requires the least amount of scaling)</span>
<span id="cb17-182"><a href="#cb17-182" aria-hidden="true" tabindex="-1"></a>to reach the target duration.</span>
<span id="cb17-183"><a href="#cb17-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-184"><a href="#cb17-184" aria-hidden="true" tabindex="-1"></a>The textgrids for these recordings (~64) are manually checked to verify the</span>
<span id="cb17-185"><a href="#cb17-185" aria-hidden="true" tabindex="-1"></a>output of the MFA with particular attention for the boundaries of phones</span>
<span id="cb17-186"><a href="#cb17-186" aria-hidden="true" tabindex="-1"></a>on a syllable or word boundary.</span>
<span id="cb17-187"><a href="#cb17-187" aria-hidden="true" tabindex="-1"></a>These TextGrids have the following format, note the addition of nuclear</span>
<span id="cb17-188"><a href="#cb17-188" aria-hidden="true" tabindex="-1"></a>and syllable interval tiers:</span>
<span id="cb17-189"><a href="#cb17-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-190"><a href="#cb17-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-193"><a href="#cb17-193" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-194"><a href="#cb17-194" aria-hidden="true" tabindex="-1"></a><span class="fu">tg.read</span>(<span class="st">"03_ChosenRecordings/FixedTextGrids/branning_01_HLL_002.TextGrid"</span>, </span>
<span id="cb17-195"><a href="#cb17-195" aria-hidden="true" tabindex="-1"></a>        <span class="st">'auto'</span>)</span>
<span id="cb17-196"><a href="#cb17-196" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-197"><a href="#cb17-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-198"><a href="#cb17-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-201"><a href="#cb17-201" aria-hidden="true" tabindex="-1"></a><span class="in">```{mermaid}</span></span>
<span id="cb17-202"><a href="#cb17-202" aria-hidden="true" tabindex="-1"></a>flowchart LR</span>
<span id="cb17-203"><a href="#cb17-203" aria-hidden="true" tabindex="-1"></a>classDef rstats fill:<span class="co">#6FA1D0,stroke:#245AAB,color:#ffffff;</span></span>
<span id="cb17-204"><a href="#cb17-204" aria-hidden="true" tabindex="-1"></a>GetDurTiers[[make_duration_tiers.R]]</span>
<span id="cb17-205"><a href="#cb17-205" aria-hidden="true" tabindex="-1"></a>class GetDurTiers rstats</span>
<span id="cb17-206"><a href="#cb17-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-207"><a href="#cb17-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-208"><a href="#cb17-208" aria-hidden="true" tabindex="-1"></a>class PromoScript python</span>
<span id="cb17-209"><a href="#cb17-209" aria-hidden="true" tabindex="-1"></a>    subgraph HLL[HLL Takes]</span>
<span id="cb17-210"><a href="#cb17-210" aria-hidden="true" tabindex="-1"></a>        direction LR</span>
<span id="cb17-211"><a href="#cb17-211" aria-hidden="true" tabindex="-1"></a>        HLL:<span class="dv">1</span> -.- HLL:... -.- HLL:n</span>
<span id="cb17-212"><a href="#cb17-212" aria-hidden="true" tabindex="-1"></a>    end</span>
<span id="cb17-213"><a href="#cb17-213" aria-hidden="true" tabindex="-1"></a>    muHLL[HLL Average]</span>
<span id="cb17-214"><a href="#cb17-214" aria-hidden="true" tabindex="-1"></a>    HLL --&gt; muHLL</span>
<span id="cb17-215"><a href="#cb17-215" aria-hidden="true" tabindex="-1"></a>    subgraph LHH[LHH Takes]</span>
<span id="cb17-216"><a href="#cb17-216" aria-hidden="true" tabindex="-1"></a>        direction LR</span>
<span id="cb17-217"><a href="#cb17-217" aria-hidden="true" tabindex="-1"></a>        LHH:<span class="dv">1</span> -.- LHH:... -.- LHH:n</span>
<span id="cb17-218"><a href="#cb17-218" aria-hidden="true" tabindex="-1"></a>    end</span>
<span id="cb17-219"><a href="#cb17-219" aria-hidden="true" tabindex="-1"></a>    muLHH[LHH Average]</span>
<span id="cb17-220"><a href="#cb17-220" aria-hidden="true" tabindex="-1"></a>    LHH --&gt; muLHH</span>
<span id="cb17-221"><a href="#cb17-221" aria-hidden="true" tabindex="-1"></a>    subgraph LHSLL[L+H<span class="dt">*LL</span> Takes]</span>
<span id="cb17-222"><a href="#cb17-222" aria-hidden="true" tabindex="-1"></a>        direction LR</span>
<span id="cb17-223"><a href="#cb17-223" aria-hidden="true" tabindex="-1"></a>        LHSLL:<span class="dv">1</span> -.- LHSLL:... -.- LHSLL:n</span>
<span id="cb17-224"><a href="#cb17-224" aria-hidden="true" tabindex="-1"></a>    end</span>
<span id="cb17-225"><a href="#cb17-225" aria-hidden="true" tabindex="-1"></a>    muLHSLL[LHSLL Average]</span>
<span id="cb17-226"><a href="#cb17-226" aria-hidden="true" tabindex="-1"></a>    LHSLL --&gt; muLHSLL</span>
<span id="cb17-227"><a href="#cb17-227" aria-hidden="true" tabindex="-1"></a>    subgraph LSHLL[L<span class="wa">*+H</span>LL Takes]</span>
<span id="cb17-228"><a href="#cb17-228" aria-hidden="true" tabindex="-1"></a>        direction LR</span>
<span id="cb17-229"><a href="#cb17-229" aria-hidden="true" tabindex="-1"></a>        LSHLL:<span class="dv">1</span> -.- LSHLL:... -.- LSHLL:n</span>
<span id="cb17-230"><a href="#cb17-230" aria-hidden="true" tabindex="-1"></a>    end</span>
<span id="cb17-231"><a href="#cb17-231" aria-hidden="true" tabindex="-1"></a>    muLSHLL[LSHLL Average]</span>
<span id="cb17-232"><a href="#cb17-232" aria-hidden="true" tabindex="-1"></a>    LSHLL --&gt; muLSHLL</span>
<span id="cb17-233"><a href="#cb17-233" aria-hidden="true" tabindex="-1"></a>    muHLL &amp; muLHH &amp; muLHSLL &amp; muLSHLL --&gt; average[Averaged Duration]</span>
<span id="cb17-234"><a href="#cb17-234" aria-hidden="true" tabindex="-1"></a>    average --&gt; GetDurTiers</span>
<span id="cb17-235"><a href="#cb17-235" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-236"><a href="#cb17-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-237"><a href="#cb17-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-238"><a href="#cb17-238" aria-hidden="true" tabindex="-1"></a><span class="fu">## Duration manipulations</span></span>
<span id="cb17-239"><a href="#cb17-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-242"><a href="#cb17-242" aria-hidden="true" tabindex="-1"></a><span class="in">```{mermaid}</span></span>
<span id="cb17-243"><a href="#cb17-243" aria-hidden="true" tabindex="-1"></a>flowchart TD</span>
<span id="cb17-244"><a href="#cb17-244" aria-hidden="true" tabindex="-1"></a>classDef praat fill:<span class="co">#E46E85,stroke:#85144b,color:#ffffff;</span></span>
<span id="cb17-245"><a href="#cb17-245" aria-hidden="true" tabindex="-1"></a>classDef python fill:<span class="co">#366994,stroke:#FFC331,color:#FFC331;</span></span>
<span id="cb17-246"><a href="#cb17-246" aria-hidden="true" tabindex="-1"></a>classDef rstats fill:<span class="co">#6FA1D0,stroke:#245AAB,color:#ffffff;</span></span>
<span id="cb17-247"><a href="#cb17-247" aria-hidden="true" tabindex="-1"></a>classDef shell fill:<span class="co">#111111,stroke:#2ECC40,color:#ffffff;</span></span>
<span id="cb17-248"><a href="#cb17-248" aria-hidden="true" tabindex="-1"></a>classDef excel fill:<span class="co">#17874E,stroke:#134130,color:#ffffff;</span></span>
<span id="cb17-249"><a href="#cb17-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-250"><a href="#cb17-250" aria-hidden="true" tabindex="-1"></a>DurationScript[[apply_dt_manipulation.praat]]</span>
<span id="cb17-251"><a href="#cb17-251" aria-hidden="true" tabindex="-1"></a>DurationScript2[[apply_dt_manipulation.praat]]</span>
<span id="cb17-252"><a href="#cb17-252" aria-hidden="true" tabindex="-1"></a>TierHelper[[tiermanip_helpers.R]]</span>
<span id="cb17-253"><a href="#cb17-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-254"><a href="#cb17-254" aria-hidden="true" tabindex="-1"></a>class RawEDA rstats</span>
<span id="cb17-255"><a href="#cb17-255" aria-hidden="true" tabindex="-1"></a>class PromoScript python</span>
<span id="cb17-256"><a href="#cb17-256" aria-hidden="true" tabindex="-1"></a>class GetDurTiers rstats</span>
<span id="cb17-257"><a href="#cb17-257" aria-hidden="true" tabindex="-1"></a>class DurationScript praat</span>
<span id="cb17-258"><a href="#cb17-258" aria-hidden="true" tabindex="-1"></a>class DurationScript2 praat</span>
<span id="cb17-259"><a href="#cb17-259" aria-hidden="true" tabindex="-1"></a>class SylHelper rstats</span>
<span id="cb17-260"><a href="#cb17-260" aria-hidden="true" tabindex="-1"></a>class TierHelper rstats</span>
<span id="cb17-261"><a href="#cb17-261" aria-hidden="true" tabindex="-1"></a>class SylSpecs excel</span>
<span id="cb17-262"><a href="#cb17-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-263"><a href="#cb17-263" aria-hidden="true" tabindex="-1"></a>Picked[<span class="ot">"</span><span class="st">ðŸ“‚03: Chosen Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-264"><a href="#cb17-264" aria-hidden="true" tabindex="-1"></a>FixedTG[<span class="ot">"</span><span class="st">ðŸ“‚03b: Fixed TextGrids</span><span class="ot">"</span>]</span>
<span id="cb17-265"><a href="#cb17-265" aria-hidden="true" tabindex="-1"></a>DurTiers[<span class="ot">"</span><span class="st">ðŸ“‚03c: Duration Tiers</span><span class="ot">"</span>]</span>
<span id="cb17-266"><a href="#cb17-266" aria-hidden="true" tabindex="-1"></a>AvgFiles[<span class="ot">"</span><span class="st">ðŸ“‚04: Scaled Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-267"><a href="#cb17-267" aria-hidden="true" tabindex="-1"></a>DurTextGrids[<span class="ot">"</span><span class="st">ðŸ“‚04a: Duration-morphed TextGrids</span><span class="ot">"</span>]</span>
<span id="cb17-268"><a href="#cb17-268" aria-hidden="true" tabindex="-1"></a>NudgedFiles[<span class="ot">"</span><span class="st">ðŸ“‚05: Nudged Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-269"><a href="#cb17-269" aria-hidden="true" tabindex="-1"></a>NudgedTextGrids[<span class="ot">"</span><span class="st">ðŸ“‚05b: Nudged TextGrids</span><span class="ot">"</span>]</span>
<span id="cb17-270"><a href="#cb17-270" aria-hidden="true" tabindex="-1"></a>NudgedDurationTiers[<span class="ot">"</span><span class="st">ðŸ“‚05a: Nudged DurationTiers</span><span class="ot">"</span>]</span>
<span id="cb17-271"><a href="#cb17-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-272"><a href="#cb17-272" aria-hidden="true" tabindex="-1"></a>EDA(Summary statistics &amp; EDA with raw files)</span>
<span id="cb17-273"><a href="#cb17-273" aria-hidden="true" tabindex="-1"></a>%%    PlotHelpers --&gt; RawEDA</span>
<span id="cb17-274"><a href="#cb17-274" aria-hidden="true" tabindex="-1"></a>    FixedTG --&gt; TierHelper</span>
<span id="cb17-275"><a href="#cb17-275" aria-hidden="true" tabindex="-1"></a>    EDA -- Determine durations to <span class="fu">use</span> --&gt; TierHelper</span>
<span id="cb17-276"><a href="#cb17-276" aria-hidden="true" tabindex="-1"></a>    TierHelper --&gt; DurTiers &amp; DurTextGrids</span>
<span id="cb17-277"><a href="#cb17-277" aria-hidden="true" tabindex="-1"></a>    DurTextGrids -.- AvgFiles </span>
<span id="cb17-278"><a href="#cb17-278" aria-hidden="true" tabindex="-1"></a>    DurTiers &amp; Picked --&gt; DurationScript --&gt; AvgFiles</span>
<span id="cb17-279"><a href="#cb17-279" aria-hidden="true" tabindex="-1"></a>    TierHelper --&gt; NudgedDurationTiers</span>
<span id="cb17-280"><a href="#cb17-280" aria-hidden="true" tabindex="-1"></a>    AvgFiles &amp; NudgedDurationTiers -- Reduce final syllable duration --&gt; DurationScript2</span>
<span id="cb17-281"><a href="#cb17-281" aria-hidden="true" tabindex="-1"></a>    DurationScript2 --&gt; NudgedFiles &amp; NudgedTextGrids</span>
<span id="cb17-282"><a href="#cb17-282" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-283"><a href="#cb17-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-284"><a href="#cb17-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-285"><a href="#cb17-285" aria-hidden="true" tabindex="-1"></a>Once the chosen recordings are selected and their textgrids checked, a second</span>
<span id="cb17-286"><a href="#cb17-286" aria-hidden="true" tabindex="-1"></a>round of averaging on the syllable level is done.</span>
<span id="cb17-287"><a href="#cb17-287" aria-hidden="true" tabindex="-1"></a>Here, the average duration of each syllable is calculated.</span>
<span id="cb17-288"><a href="#cb17-288" aria-hidden="true" tabindex="-1"></a>This is done separately for two- and three-syllable word sets.</span>
<span id="cb17-289"><a href="#cb17-289" aria-hidden="true" tabindex="-1"></a>These averages serve as target syllable durations for each word.</span>
<span id="cb17-290"><a href="#cb17-290" aria-hidden="true" tabindex="-1"></a>Duration Tiers are written for each file to scale the duration of each syllable</span>
<span id="cb17-291"><a href="#cb17-291" aria-hidden="true" tabindex="-1"></a>of the nuclear word to the target values.</span>
<span id="cb17-292"><a href="#cb17-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-293"><a href="#cb17-293" aria-hidden="true" tabindex="-1"></a>Duration Tiers technically have the same exact specification as Pitch Tiers,</span>
<span id="cb17-294"><a href="#cb17-294" aria-hidden="true" tabindex="-1"></a>so I'll show an example of what these duration tiers look like by treating it</span>
<span id="cb17-295"><a href="#cb17-295" aria-hidden="true" tabindex="-1"></a>as a Pitch Tier.</span>
<span id="cb17-296"><a href="#cb17-296" aria-hidden="true" tabindex="-1"></a>The Y-axis isn't perfect because the range of the values is very small (both endpoints round to 1) but below you can see the two rows of points on the ends are at 1, but there's a region at 1.3 (appears as much higher) and a region at .94 (appears as slightly lower than 1).</span>
<span id="cb17-297"><a href="#cb17-297" aria-hidden="true" tabindex="-1"></a>Thus, we see that for this recording, the first syllable needed to be stretched while the second syllable needed to be shrunk slightly.</span>
<span id="cb17-298"><a href="#cb17-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-301"><a href="#cb17-301" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-302"><a href="#cb17-302" aria-hidden="true" tabindex="-1"></a>durationtier <span class="ot">&lt;-</span> </span>
<span id="cb17-303"><a href="#cb17-303" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dt.read</span>(<span class="st">"03_ChosenRecordings/DurationTiers/branning_01_HLL_002.DurationTier"</span>)</span>
<span id="cb17-304"><a href="#cb17-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-305"><a href="#cb17-305" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(durationtier)[<span class="st">'type'</span>] <span class="ot">&lt;-</span> <span class="st">"PitchTier"</span></span>
<span id="cb17-306"><a href="#cb17-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-307"><a href="#cb17-307" aria-hidden="true" tabindex="-1"></a>durationtier</span>
<span id="cb17-308"><a href="#cb17-308" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-309"><a href="#cb17-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-310"><a href="#cb17-310" aria-hidden="true" tabindex="-1"></a>So far we have standardized the duration of the syllables using manually</span>
<span id="cb17-311"><a href="#cb17-311" aria-hidden="true" tabindex="-1"></a>calculated duration tiers given target values from the average durations across</span>
<span id="cb17-312"><a href="#cb17-312" aria-hidden="true" tabindex="-1"></a>utterances.</span>
<span id="cb17-313"><a href="#cb17-313" aria-hidden="true" tabindex="-1"></a>A second duration manipulation is also applied where the final syllable in each</span>
<span id="cb17-314"><a href="#cb17-314" aria-hidden="true" tabindex="-1"></a>word is shrunk by a constant value, such as .80 or .90. </span>
<span id="cb17-315"><a href="#cb17-315" aria-hidden="true" tabindex="-1"></a>Because the syllables are already standardized, this value is applied in the</span>
<span id="cb17-316"><a href="#cb17-316" aria-hidden="true" tabindex="-1"></a>same way to every file.</span>
<span id="cb17-317"><a href="#cb17-317" aria-hidden="true" tabindex="-1"></a>This is done to correct for final lengthening that makes straight-line </span>
<span id="cb17-318"><a href="#cb17-318" aria-hidden="true" tabindex="-1"></a>interpolation between the pitch accent and boundary tone targets sound a bit off.</span>
<span id="cb17-319"><a href="#cb17-319" aria-hidden="true" tabindex="-1"></a>The value to shrink by is largely arbitrary, and we try reducing the duration </span>
<span id="cb17-320"><a href="#cb17-320" aria-hidden="true" tabindex="-1"></a>of the final syllable in steps of 5%, from 100% (original duration) to 65% of</span>
<span id="cb17-321"><a href="#cb17-321" aria-hidden="true" tabindex="-1"></a>the original duration.</span>
<span id="cb17-322"><a href="#cb17-322" aria-hidden="true" tabindex="-1"></a>When listening to the final resynthesis, it seems like 85% or 80% works best.</span>
<span id="cb17-323"><a href="#cb17-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-324"><a href="#cb17-324" aria-hidden="true" tabindex="-1"></a><span class="fu">## Resynthesis</span></span>
<span id="cb17-325"><a href="#cb17-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-328"><a href="#cb17-328" aria-hidden="true" tabindex="-1"></a><span class="in">```{mermaid}</span></span>
<span id="cb17-329"><a href="#cb17-329" aria-hidden="true" tabindex="-1"></a>flowchart TB</span>
<span id="cb17-330"><a href="#cb17-330" aria-hidden="true" tabindex="-1"></a>classDef praat fill:<span class="co">#E46E85,stroke:#85144b,color:#ffffff;</span></span>
<span id="cb17-331"><a href="#cb17-331" aria-hidden="true" tabindex="-1"></a>classDef python fill:<span class="co">#366994,stroke:#FFC331,color:#FFC331;</span></span>
<span id="cb17-332"><a href="#cb17-332" aria-hidden="true" tabindex="-1"></a>classDef rstats fill:<span class="co">#6FA1D0,stroke:#245AAB,color:#ffffff;</span></span>
<span id="cb17-333"><a href="#cb17-333" aria-hidden="true" tabindex="-1"></a>classDef shell fill:<span class="co">#111111,stroke:#2ECC40,color:#ffffff;</span></span>
<span id="cb17-334"><a href="#cb17-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-335"><a href="#cb17-335" aria-hidden="true" tabindex="-1"></a>Exp1ResynthScript[[resynthesize_continua.praat]]</span>
<span id="cb17-336"><a href="#cb17-336" aria-hidden="true" tabindex="-1"></a>Exp2ResynthScript[[resynthesize_continua_exp2.praat]]</span>
<span id="cb17-337"><a href="#cb17-337" aria-hidden="true" tabindex="-1"></a>Exp3ResynthScript[[resynthesize_straight_alignment_continua.praat]]</span>
<span id="cb17-338"><a href="#cb17-338" aria-hidden="true" tabindex="-1"></a>Exp3cResynthScript[[resynthesize_curved_alignment_continua.praat]]</span>
<span id="cb17-339"><a href="#cb17-339" aria-hidden="true" tabindex="-1"></a>ResynthAnalysis[[resynthesis_analysis.qmd]]</span>
<span id="cb17-340"><a href="#cb17-340" aria-hidden="true" tabindex="-1"></a>BezierHelpers[[bezier_helpers.R]]</span>
<span id="cb17-341"><a href="#cb17-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-342"><a href="#cb17-342" aria-hidden="true" tabindex="-1"></a>class Exp1ResynthScript praat</span>
<span id="cb17-343"><a href="#cb17-343" aria-hidden="true" tabindex="-1"></a>class Exp2ResynthScript praat</span>
<span id="cb17-344"><a href="#cb17-344" aria-hidden="true" tabindex="-1"></a>class Exp3ResynthScript praat</span>
<span id="cb17-345"><a href="#cb17-345" aria-hidden="true" tabindex="-1"></a>class Exp3cResynthScript praat</span>
<span id="cb17-346"><a href="#cb17-346" aria-hidden="true" tabindex="-1"></a>class ResynthAnalysis rstats</span>
<span id="cb17-347"><a href="#cb17-347" aria-hidden="true" tabindex="-1"></a>class BezierHelpers rstats</span>
<span id="cb17-348"><a href="#cb17-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-349"><a href="#cb17-349" aria-hidden="true" tabindex="-1"></a>AvgFiles[<span class="ot">"</span><span class="st">ðŸ“‚05: Nudged Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-350"><a href="#cb17-350" aria-hidden="true" tabindex="-1"></a>Exp1Resynth[<span class="ot">"</span><span class="st">ðŸ“‚06: Exp1 Resynthesized Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-351"><a href="#cb17-351" aria-hidden="true" tabindex="-1"></a>Exp2Resynth[<span class="ot">"</span><span class="st">ðŸ“‚06b: Exp1 Resynthesized Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-352"><a href="#cb17-352" aria-hidden="true" tabindex="-1"></a>Exp3Resynth[<span class="ot">"</span><span class="st">ðŸ“‚06c: Exp1 Resynthesized Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-353"><a href="#cb17-353" aria-hidden="true" tabindex="-1"></a>Exp3cResynth[<span class="ot">"</span><span class="st">ðŸ“‚06cCurved: Exp1 Resynthesized Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-354"><a href="#cb17-354" aria-hidden="true" tabindex="-1"></a>FixedFiles[<span class="ot">"</span><span class="st">ðŸ“‚07: Manually fixed Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-355"><a href="#cb17-355" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb17-356"><a href="#cb17-356" aria-hidden="true" tabindex="-1"></a>subgraph Resynthesis[Resynthesis]</span>
<span id="cb17-357"><a href="#cb17-357" aria-hidden="true" tabindex="-1"></a>  direction LR</span>
<span id="cb17-358"><a href="#cb17-358" aria-hidden="true" tabindex="-1"></a>  subgraph ResynthScripts[Resynthesis Scripts]</span>
<span id="cb17-359"><a href="#cb17-359" aria-hidden="true" tabindex="-1"></a>    direction TB</span>
<span id="cb17-360"><a href="#cb17-360" aria-hidden="true" tabindex="-1"></a>    Exp1ResynthScript ---</span>
<span id="cb17-361"><a href="#cb17-361" aria-hidden="true" tabindex="-1"></a>      Exp2ResynthScript ---</span>
<span id="cb17-362"><a href="#cb17-362" aria-hidden="true" tabindex="-1"></a>      Exp3ResynthScript ---</span>
<span id="cb17-363"><a href="#cb17-363" aria-hidden="true" tabindex="-1"></a>      Exp3cResynthScript</span>
<span id="cb17-364"><a href="#cb17-364" aria-hidden="true" tabindex="-1"></a>  end</span>
<span id="cb17-365"><a href="#cb17-365" aria-hidden="true" tabindex="-1"></a>  subgraph ResynthFiles[Resynthesized Files]</span>
<span id="cb17-366"><a href="#cb17-366" aria-hidden="true" tabindex="-1"></a>    direction TB</span>
<span id="cb17-367"><a href="#cb17-367" aria-hidden="true" tabindex="-1"></a>    Exp1Resynth ---</span>
<span id="cb17-368"><a href="#cb17-368" aria-hidden="true" tabindex="-1"></a>    Exp2Resynth ---</span>
<span id="cb17-369"><a href="#cb17-369" aria-hidden="true" tabindex="-1"></a>    Exp3Resynth ---</span>
<span id="cb17-370"><a href="#cb17-370" aria-hidden="true" tabindex="-1"></a>    Exp3cResynth</span>
<span id="cb17-371"><a href="#cb17-371" aria-hidden="true" tabindex="-1"></a>  end</span>
<span id="cb17-372"><a href="#cb17-372" aria-hidden="true" tabindex="-1"></a>  BezierHelpers -- Create curves --&gt; ResynthScripts</span>
<span id="cb17-373"><a href="#cb17-373" aria-hidden="true" tabindex="-1"></a>  ResynthScripts --&gt; ResynthFiles</span>
<span id="cb17-374"><a href="#cb17-374" aria-hidden="true" tabindex="-1"></a>end</span>
<span id="cb17-375"><a href="#cb17-375" aria-hidden="true" tabindex="-1"></a>AvgFiles --&gt; Resynthesis</span>
<span id="cb17-376"><a href="#cb17-376" aria-hidden="true" tabindex="-1"></a>Resynthesis --&gt; ResynthAnalysis</span>
<span id="cb17-377"><a href="#cb17-377" aria-hidden="true" tabindex="-1"></a>ResynthAnalysis --&gt; ResynthViz[Visualizations <span class="ot">and</span> Scripts <span class="kw">for</span> resynthesis debugging]</span>
<span id="cb17-378"><a href="#cb17-378" aria-hidden="true" tabindex="-1"></a>ResynthViz -- Check <span class="kw">for</span> resynthesis errors --&gt; FixedFiles</span>
<span id="cb17-379"><a href="#cb17-379" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-380"><a href="#cb17-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-381"><a href="#cb17-381" aria-hidden="true" tabindex="-1"></a>We can now resynthesize all of the averaged recordings.</span>
<span id="cb17-382"><a href="#cb17-382" aria-hidden="true" tabindex="-1"></a>The <span class="in">`resynthesis_analysis.qmd`</span> provides visualizations of the resynthesized</span>
<span id="cb17-383"><a href="#cb17-383" aria-hidden="true" tabindex="-1"></a>files to double check that the resynthesis held. Sometimes rerunning the</span>
<span id="cb17-384"><a href="#cb17-384" aria-hidden="true" tabindex="-1"></a>resynthesis on the file is good enough, but sometimes there's a voice quality</span>
<span id="cb17-385"><a href="#cb17-385" aria-hidden="true" tabindex="-1"></a>issue at play.</span>
<span id="cb17-386"><a href="#cb17-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-387"><a href="#cb17-387" aria-hidden="true" tabindex="-1"></a><span class="fu">### Experiment 1</span></span>
<span id="cb17-388"><a href="#cb17-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-389"><a href="#cb17-389" aria-hidden="true" tabindex="-1"></a>This experiment uses the <span class="in">`Scripts/resynthesize_continua.praat`</span> script, and</span>
<span id="cb17-390"><a href="#cb17-390" aria-hidden="true" tabindex="-1"></a>the output is saved in <span class="in">`06_ResynthesizedRecordings`</span></span>
<span id="cb17-391"><a href="#cb17-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-392"><a href="#cb17-392" aria-hidden="true" tabindex="-1"></a><span class="fu">### Experiment 2</span></span>
<span id="cb17-393"><a href="#cb17-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-394"><a href="#cb17-394" aria-hidden="true" tabindex="-1"></a>This experiment uses the <span class="in">`Scripts/resynthesize_alignment_continua_exp2.praat`</span></span>
<span id="cb17-395"><a href="#cb17-395" aria-hidden="true" tabindex="-1"></a>script, and the output is saved in <span class="in">`06b_ResynthesizedRecordingsExp2`</span>. </span>
<span id="cb17-396"><a href="#cb17-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-397"><a href="#cb17-397" aria-hidden="true" tabindex="-1"></a><span class="fu">### Experiment 3</span></span>
<span id="cb17-398"><a href="#cb17-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-399"><a href="#cb17-399" aria-hidden="true" tabindex="-1"></a>There are two versions: </span>
<span id="cb17-400"><a href="#cb17-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-401"><a href="#cb17-401" aria-hidden="true" tabindex="-1"></a><span class="ss"> - </span><span class="in">`Scripts/resynthesize_straight_alignment_continua.praat`</span> will give straight-line</span>
<span id="cb17-402"><a href="#cb17-402" aria-hidden="true" tabindex="-1"></a> interpolations for a continuum of bitonal pitch accents that differ in alignment.</span>
<span id="cb17-403"><a href="#cb17-403" aria-hidden="true" tabindex="-1"></a> Files saved in <span class="in">`06c_ResynthesizedRecordingsExp3`</span></span>
<span id="cb17-404"><a href="#cb17-404" aria-hidden="true" tabindex="-1"></a><span class="ss"> - </span><span class="in">`Scripts/resynthesize_curved_alignment_continua.praat`</span> uses bezier curves to create</span>
<span id="cb17-405"><a href="#cb17-405" aria-hidden="true" tabindex="-1"></a> curved interpolations for the onglides, but the trajectory from the peak to</span>
<span id="cb17-406"><a href="#cb17-406" aria-hidden="true" tabindex="-1"></a> the boundary tone is still a straight line. Files saved in </span>
<span id="cb17-407"><a href="#cb17-407" aria-hidden="true" tabindex="-1"></a> <span class="in">`06c_ResynthesizedRecordingsExp3CURVED`</span></span>
<span id="cb17-408"><a href="#cb17-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-409"><a href="#cb17-409" aria-hidden="true" tabindex="-1"></a><span class="fu">## Final Normalization Procedures</span></span>
<span id="cb17-410"><a href="#cb17-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-413"><a href="#cb17-413" aria-hidden="true" tabindex="-1"></a><span class="in">```{mermaid}</span></span>
<span id="cb17-414"><a href="#cb17-414" aria-hidden="true" tabindex="-1"></a>flowchart TD</span>
<span id="cb17-415"><a href="#cb17-415" aria-hidden="true" tabindex="-1"></a>classDef praat fill:<span class="co">#E46E85,stroke:#85144b,color:#ffffff;</span></span>
<span id="cb17-416"><a href="#cb17-416" aria-hidden="true" tabindex="-1"></a>classDef python fill:<span class="co">#366994,stroke:#FFC331,color:#FFC331;</span></span>
<span id="cb17-417"><a href="#cb17-417" aria-hidden="true" tabindex="-1"></a>classDef rstats fill:<span class="co">#6FA1D0,stroke:#245AAB,color:#ffffff;</span></span>
<span id="cb17-418"><a href="#cb17-418" aria-hidden="true" tabindex="-1"></a>classDef shell fill:<span class="co">#111111,stroke:#2ECC40,color:#ffffff;</span></span>
<span id="cb17-419"><a href="#cb17-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-420"><a href="#cb17-420" aria-hidden="true" tabindex="-1"></a>SilenceNormScript[[norm_silence.praat]]</span>
<span id="cb17-421"><a href="#cb17-421" aria-hidden="true" tabindex="-1"></a>RMSNormScript[[rms_norm.praat]]</span>
<span id="cb17-422"><a href="#cb17-422" aria-hidden="true" tabindex="-1"></a>FinalEDA[[stimuli_analyses.qmd]]</span>
<span id="cb17-423"><a href="#cb17-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-424"><a href="#cb17-424" aria-hidden="true" tabindex="-1"></a>class SilenceNormScript praat</span>
<span id="cb17-425"><a href="#cb17-425" aria-hidden="true" tabindex="-1"></a>class RMSNormScript praat</span>
<span id="cb17-426"><a href="#cb17-426" aria-hidden="true" tabindex="-1"></a>class FinalEDA rstats</span>
<span id="cb17-427"><a href="#cb17-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-428"><a href="#cb17-428" aria-hidden="true" tabindex="-1"></a>FixedFiles[<span class="ot">"</span><span class="st">ðŸ“‚06: Manually fixed Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-429"><a href="#cb17-429" aria-hidden="true" tabindex="-1"></a>SilNormed[<span class="ot">"</span><span class="st">ðŸ“‚07: Silence Duration Normed Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-430"><a href="#cb17-430" aria-hidden="true" tabindex="-1"></a>FinalFiles[<span class="ot">"</span><span class="st">ðŸ“‚08: Final Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-431"><a href="#cb17-431" aria-hidden="true" tabindex="-1"></a>Cull[<span class="ot">"</span><span class="st">ðŸ“‚09: Culled Recordings</span><span class="ot">"</span>]</span>
<span id="cb17-432"><a href="#cb17-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-433"><a href="#cb17-433" aria-hidden="true" tabindex="-1"></a>FixedFiles -- Norm Silence Durations --&gt; SilenceNormScript --&gt; SilNormed</span>
<span id="cb17-434"><a href="#cb17-434" aria-hidden="true" tabindex="-1"></a>    SilNormed -- RMS Norm  Intensity --&gt; RMSNormScript --&gt; FinalFiles</span>
<span id="cb17-435"><a href="#cb17-435" aria-hidden="true" tabindex="-1"></a>    FinalFiles -- Choose subset of files --&gt; Cull</span>
<span id="cb17-436"><a href="#cb17-436" aria-hidden="true" tabindex="-1"></a>    FinalStats([Plots <span class="ot">and</span> Statistics of final stimuli])</span>
<span id="cb17-437"><a href="#cb17-437" aria-hidden="true" tabindex="-1"></a>    Cull --&gt; FinalEDA --&gt; FinalStats</span>
<span id="cb17-438"><a href="#cb17-438" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-439"><a href="#cb17-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-440"><a href="#cb17-440" aria-hidden="true" tabindex="-1"></a><span class="fu"># Automation</span></span>
<span id="cb17-441"><a href="#cb17-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-442"><a href="#cb17-442" aria-hidden="true" tabindex="-1"></a>Anything that does not absolutely require human intervention, such as the textgrid annotation at the very beginning, is automated.</span>
<span id="cb17-443"><a href="#cb17-443" aria-hidden="true" tabindex="-1"></a>This includes running praat scripts, making duration calculations, and running analyses (after they're written of course.)</span>
<span id="cb17-444"><a href="#cb17-444" aria-hidden="true" tabindex="-1"></a>Automation is done via the <span class="in">`{targets}`</span> R package, which provides makefile-like functionality through R.</span>
<span id="cb17-445"><a href="#cb17-445" aria-hidden="true" tabindex="-1"></a>You can see the flowchart for the automated steps below, which reruns a target whenever an upstream dependency is modified (eg new file, removed file, edited file).</span>
<span id="cb17-446"><a href="#cb17-446" aria-hidden="true" tabindex="-1"></a>Through this, we don't have to worry bout rerunning specific scripts in a specific order.</span>
<span id="cb17-447"><a href="#cb17-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-450"><a href="#cb17-450" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-451"><a href="#cb17-451" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_glimpse</span>(<span class="at">targets_only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-452"><a href="#cb17-452" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>